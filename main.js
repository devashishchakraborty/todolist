(()=>{"use strict";class e{constructor(e,t,o,s){this.title=e,this.description=t,this.dueDate=o,this.priority=s,this.completed=!1}}class t{constructor(){this.items=new Array}addTodoItem(e){this.items.push(e)}removeTodoItem(e){this.items=this.items.filter((t=>t.title!==e))}todoItemNameExists(e){return this.getTodoItemNames().includes(e)}getTodoItemNames(){return this.items.map((e=>e.title))}getTodoItems(){return this.items}setTodoItems(e){this.items=e}toggleTodoItemCompletedStatus(e){this.items.forEach((function(t){t.title===e&&(!1===t.completed?t.completed=!0:t.completed=!1)}))}}class o{constructor(){this.projects={},this.projects.Home=new t}addProject(e,t){this.projects[e]=t}removeProject(e){delete this.projects[e]}getProject(e){return this.projects[e]}getProjects(){return this.projects}setProject(e,t){this.projects[e]=t}projectNameExists(e){return Object.keys(this.projects).includes(e)}getProjectNames(){return Object.keys(this.projects)}}const s=new class{setTodoList(e){localStorage.setItem("todoList",JSON.stringify(e))}addProject(e){const o=this.getTodoList();o.addProject(e,new t),this.setTodoList(o)}projectNameExists(e){return this.getTodoList().projectNameExists(e)}removeProject(e){const t=this.getTodoList();t.removeProject(e),this.setTodoList(t)}getProjectNames(){return this.getTodoList().getProjectNames()}getTodoList(){const e=Object.assign(new o,JSON.parse(localStorage.getItem("todoList")));for(let o in e.getProjects())e.setProject(o,Object.assign(new t,e.getProject(o)));return e}addTodoItem(e,t){const o=this.getTodoList();o.getProject(e).addTodoItem(t),this.setTodoList(o)}removeTodoItem(e,t){const o=this.getTodoList();o.getProject(e).removeTodoItem(t),this.setTodoList(o)}getTodoItems(e){return this.getTodoList().getProject(e).getTodoItems()}todoItemNameExists(e,t){return this.getTodoList().getProject(e).todoItemNameExists(t)}toggleTodoItemCompletedStatus(e,t){const o=this.getTodoList();o.getProject(e).toggleTodoItemCompletedStatus(t),this.setTodoList(o)}},i=document.querySelector(".menu .home"),r=document.querySelector("#addTaskBtn"),c=document.querySelector("#addProjectBtn"),n=document.querySelector(".addTaskFormOverlay"),d=document.querySelector(".newTask"),a=document.querySelector(".addProjectOverlay"),l=document.querySelector(".newProject"),m=document.querySelector(".todoDisplay"),u=document.querySelector(".projectDisplayArea"),v=document.querySelector(".dashboard .projectTitle");function p(e){m.textContent="",v.textContent=e,s.getTodoItems(e).forEach((function(e){m.innerHTML+=`\n        <div class="todoItemTab" priority="${e.priority}" completed="${e.completed}">\n            <div class="customCheckbox" checked=${e.completed}></div>\n            <details>\n                <summary class="todoItemSummary">\n                    <div class="todoItemTitle">${e.title}</div>\n                    <div class="todoItemDueDate">${e.dueDate}</div>\n                </summary>\n                <div class="todoItemDescription">Description: ${e.description}</div>\n            </details>\n            <div class="removeItemBtn">&#10799;</div>\n        </div>`})),function(){const e=v.innerText;Array.from(document.querySelectorAll(".removeItemBtn")).forEach((function(t){t.addEventListener("click",(function(){const o=t.previousElementSibling.children[0].children[0].innerText;s.removeTodoItem(e,o),p(e)}))}))}(),function(){const e=v.innerText;Array.from(document.querySelectorAll(".customCheckbox")).forEach((function(t){t.addEventListener("click",(function(){const o=t.nextElementSibling.children[0].children[0].innerText;s.toggleTodoItemCompletedStatus(e,o),p(e)}))}))}()}function j(){const e=d.querySelector("#project");e.textContent="",s.getProjectNames().forEach((function(t){e.innerHTML+=`\n        <option value=${t}>${t}</option>\n        `}))}function h(){u.textContent="",s.getProjectNames().slice(1).forEach((function(e){u.innerHTML+=`\n        <div class="projectTab">\n            <div class="projectTabName">\n                ${e}\n            </div>\n            <div class="closeButton">&#10799;</div>\n        </div>`})),Array.from(document.querySelectorAll(".projectTab .closeButton")).forEach((function(e){e.addEventListener("click",(function(){document.querySelector(".dashboard .projectTitle").innerText===e.previousElementSibling.innerText&&p("Home"),s.removeProject(e.previousElementSibling.innerText),h(),j()}))})),Array.from(document.querySelectorAll(".projectTab .projectTabName")).forEach((function(e){e.addEventListener("click",(function(){p(e.innerText)}))})),i.addEventListener("click",(function(){p("Home")})),j()}p("Home"),r.addEventListener("click",(function(){n.classList.remove("inactive")})),d.addEventListener("submit",(t=>function(t){s.todoItemNameExists(project.value,title.value)?alert("Task Name already exists, choose another name"):(s.addTodoItem(project.value,new e(title.value,description.value,dueDate.value,priority.value)),n.classList.add("inactive"),p(project.value),title.value="",description.value="",dueDate.value=""),t.preventDefault()}(t))),d.addEventListener("reset",(function(){n.classList.add("inactive")})),h(),c.addEventListener("click",(()=>{a.classList.remove("inactive")})),l.addEventListener("submit",(e=>function(e){s.projectNameExists(projectName.value)?alert("Project Name already exists, choose a different name."):(s.addProject(projectName.value),a.classList.add("inactive"),h(),projectName.value=""),e.preventDefault()}(e))),l.addEventListener("reset",(()=>{a.classList.add("inactive")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQU8sTUFBTUEsRUFDVCxXQUFBQyxDQUFZQyxFQUFPQyxFQUFhQyxFQUFTQyxHQUNyQ0MsS0FBS0osTUFBUUEsRUFDYkksS0FBS0gsWUFBY0EsRUFDbkJHLEtBQUtGLFFBQVVBLEVBQ2ZFLEtBQUtELFNBQVdBLEVBQ2hCQyxLQUFLQyxXQUFZLENBQ3JCLEVDUEcsTUFBTUMsRUFDVCxXQUFBUCxHQUNJSyxLQUFLRyxNQUFRLElBQUlDLEtBQ3JCLENBRUEsV0FBQUMsQ0FBWUMsR0FDUk4sS0FBS0csTUFBTUksS0FBS0QsRUFDcEIsQ0FFQSxjQUFBRSxDQUFlQyxHQUNYVCxLQUFLRyxNQUFRSCxLQUFLRyxNQUFNTyxRQUFRSixHQUFhQSxFQUFTVixRQUFVYSxHQUNwRSxDQUVBLGtCQUFBRSxDQUFtQkMsR0FDZixPQUFPWixLQUFLYSxtQkFBbUJDLFNBQVNGLEVBQzVDLENBRUEsZ0JBQUFDLEdBQ0ksT0FBT2IsS0FBS0csTUFBTVksS0FBSVQsR0FBWUEsRUFBU1YsT0FDL0MsQ0FFQSxZQUFBb0IsR0FDSSxPQUFPaEIsS0FBS0csS0FDaEIsQ0FFQSxZQUFBYyxDQUFhZCxHQUNUSCxLQUFLRyxNQUFRQSxDQUNqQixDQUVBLDZCQUFBZSxDQUE4QnRCLEdBQzFCSSxLQUFLRyxNQUFNZ0IsU0FBUSxTQUFTYixHQUNwQkEsRUFBU1YsUUFBVUEsS0FDUSxJQUF2QlUsRUFBU0wsVUFDVEssRUFBU0wsV0FBWSxFQUVyQkssRUFBU0wsV0FBWSxFQUdqQyxHQUVKLEVDdENHLE1BQU1tQixFQUNULFdBQUF6QixHQUNJSyxLQUFLcUIsU0FBVyxDQUFDLEVBQ2pCckIsS0FBS3FCLFNBQWUsS0FBSSxJQUFJbkIsQ0FDaEMsQ0FFQSxVQUFBb0IsQ0FBV0MsRUFBYUMsR0FDcEJ4QixLQUFLcUIsU0FBU0UsR0FBZUMsQ0FDakMsQ0FFQSxhQUFBQyxDQUFjRixVQUNIdkIsS0FBS3FCLFNBQVNFLEVBQ3pCLENBRUEsVUFBQUcsQ0FBV0gsR0FDUCxPQUFPdkIsS0FBS3FCLFNBQVNFLEVBQ3pCLENBRUEsV0FBQUksR0FDSSxPQUFPM0IsS0FBS3FCLFFBQ2hCLENBRUEsVUFBQU8sQ0FBV0wsRUFBYU0sR0FDcEI3QixLQUFLcUIsU0FBU0UsR0FBZU0sQ0FDakMsQ0FFQSxpQkFBQUMsQ0FBa0JQLEdBQ2QsT0FBT1EsT0FBT0MsS0FBS2hDLEtBQUtxQixVQUFVUCxTQUFTUyxFQUMvQyxDQUVBLGVBQUFVLEdBQ0ksT0FBT0YsT0FBT0MsS0FBS2hDLEtBQUtxQixTQUM1QixFQy9CSixNQUFNYSxFQUFVLElDQ1QsTUFDSCxXQUFBQyxDQUFZQyxHQUNSQyxhQUFhQyxRQUFRLFdBQVlDLEtBQUtDLFVBQVVKLEdBQ3BELENBRUEsVUFBQWQsQ0FBV0MsR0FDUCxNQUFNa0IsRUFBV3pDLEtBQUswQyxjQUN0QkQsRUFBU25CLFdBQVdDLEVBQWEsSUFBSXJCLEdBQ3JDRixLQUFLbUMsWUFBWU0sRUFDckIsQ0FFQSxpQkFBQVgsQ0FBa0JQLEdBRWQsT0FEaUJ2QixLQUFLMEMsY0FDTlosa0JBQWtCUCxFQUN0QyxDQUVBLGFBQUFFLENBQWNGLEdBQ1YsTUFBTWtCLEVBQVd6QyxLQUFLMEMsY0FDdEJELEVBQVNoQixjQUFjRixHQUN2QnZCLEtBQUttQyxZQUFZTSxFQUNyQixDQUVBLGVBQUFSLEdBQ0ksT0FBT2pDLEtBQUswQyxjQUFjVCxpQkFDOUIsQ0FFQSxXQUFBUyxHQUNJLE1BQU1ELEVBQVdWLE9BQU9ZLE9BQU8sSUFBSXZCLEVBQVltQixLQUFLSyxNQUFNUCxhQUFhUSxRQUFRLGNBRS9FLElBQUksSUFBSXJCLEtBQVdpQixFQUFTZCxjQUN4QmMsRUFBU2IsV0FBV0osRUFBU08sT0FBT1ksT0FBTyxJQUFJekMsRUFBV3VDLEVBQVNmLFdBQVdGLEtBR2xGLE9BQU9pQixDQUNYLENBRUEsV0FBQXBDLENBQVlrQixFQUFhakIsR0FDckIsTUFBTW1DLEVBQVd6QyxLQUFLMEMsY0FDdEJELEVBQVNmLFdBQVdILEdBQWFsQixZQUFZQyxHQUM3Q04sS0FBS21DLFlBQVlNLEVBQ3JCLENBRUEsY0FBQWpDLENBQWVlLEVBQWFYLEdBQ3hCLE1BQU02QixFQUFXekMsS0FBSzBDLGNBQ3RCRCxFQUFTZixXQUFXSCxHQUFhZixlQUFlSSxHQUNoRFosS0FBS21DLFlBQVlNLEVBQ3JCLENBRUEsWUFBQXpCLENBQWFPLEdBQ1QsT0FBT3ZCLEtBQUswQyxjQUFjaEIsV0FBV0gsR0FBYVAsY0FDdEQsQ0FFQSxrQkFBQUwsQ0FBbUJZLEVBQWFYLEdBQzVCLE9BQU9aLEtBQUswQyxjQUFjaEIsV0FBV0gsR0FBYVosbUJBQW1CQyxFQUN6RSxDQUVBLDZCQUFBTSxDQUE4QkssRUFBYWpCLEdBQ3ZDLE1BQU1tQyxFQUFXekMsS0FBSzBDLGNBQ3RCRCxFQUFTZixXQUFXSCxHQUFhTCw4QkFBOEJaLEdBQy9ETixLQUFLbUMsWUFBWU0sRUFDckIsR0QxREVLLEVBQWlCQyxTQUFTQyxjQUFjLGVBQ3hDQyxFQUFpQkYsU0FBU0MsY0FBYyxlQUN4Q0UsRUFBZ0JILFNBQVNDLGNBQWMsa0JBQ3ZDRyxFQUFxQkosU0FBU0MsY0FBYyx1QkFDNUNJLEVBQWtCTCxTQUFTQyxjQUFjLFlBQ3pDSyxFQUF3Qk4sU0FBU0MsY0FBYyxzQkFDL0NNLEVBQWlCUCxTQUFTQyxjQUFjLGVBQ3hDTyxFQUFrQlIsU0FBU0MsY0FBYyxnQkFDekNRLEVBQXNCVCxTQUFTQyxjQUFjLHVCQUM3Q1MsRUFBd0JWLFNBQVNDLGNBQWMsNEJBeURyRCxTQUFTVSxFQUFhbkMsR0FDbEJnQyxFQUFnQkksWUFBYyxHQUU5QkYsRUFBc0JFLFlBQWNwQyxFQUNwQ1csRUFBUWxCLGFBQWFPLEdBQWFKLFNBQVEsU0FBU2IsR0FDL0NpRCxFQUFnQkssV0FBYSxnREFDUXRELEVBQVNQLHdCQUF3Qk8sRUFBU0wsZ0VBQ3JDSyxFQUFTTCw4SUFHVkssRUFBU1YsaUVBQ1BVLEVBQVNSLDRHQUVJUSxFQUFTVCxrSEFJckUsSUF6Q0osV0FDSSxNQUFNMEIsRUFBY2tDLEVBQXNCSSxVQUNuQnpELE1BQU0wRCxLQUFLZixTQUFTZ0IsaUJBQWlCLG1CQUM3QzVDLFNBQVEsU0FBUzZDLEdBQzVCQSxFQUFjQyxpQkFBaUIsU0FBUyxXQUNwQyxNQUFNeEQsRUFBV3VELEVBQWNFLHVCQUF1QkMsU0FBUyxHQUFHQSxTQUFTLEdBQUdOLFVBQzlFM0IsRUFBUTFCLGVBQWVlLEVBQWFkLEdBQ3BDaUQsRUFBYW5DLEVBQ2pCLEdBQ0osR0FDSixDQWdDSTZDLEdBOUJKLFdBQ0ksTUFBTTdDLEVBQWNrQyxFQUFzQkksVUFDdkJ6RCxNQUFNMEQsS0FBS2YsU0FBU2dCLGlCQUFpQixvQkFDN0M1QyxTQUFRLFNBQVNrRCxHQUN4QkEsRUFBU0osaUJBQWlCLFNBQVMsV0FDL0IsTUFBTUssRUFBZ0JELEVBQVNFLG1CQUFtQkosU0FBUyxHQUFHQSxTQUFTLEdBQUdOLFVBQzFFM0IsRUFBUWhCLDhCQUE4QkssRUFBYStDLEdBQ25EWixFQUFhbkMsRUFDakIsR0FDSixHQUNKLENBcUJJaUQsRUFDSixDQThCQSxTQUFTQyxJQUNMLE1BQU1DLEVBQXVCdEIsRUFBZ0JKLGNBQWMsWUFDM0QwQixFQUFxQmYsWUFBYyxHQUNuQ3pCLEVBQVFELGtCQUFrQmQsU0FBUSxTQUFTSSxHQUN2Q21ELEVBQXFCZCxXQUFhLDJCQUNsQnJDLEtBQWVBLHNCQUVuQyxHQUNKLENBaUJBLFNBQVNvRCxJQUNMbkIsRUFBb0JHLFlBQWMsR0FDYnpCLEVBQVFELGtCQUFrQjJDLE1BQU0sR0FFeEN6RCxTQUFRLFNBQVNJLEdBQzFCaUMsRUFBb0JJLFdBQWEsaUdBR3ZCckMsNEZBSWQsSUExQjBCbkIsTUFBTTBELEtBQUtmLFNBQVNnQixpQkFBaUIsNkJBRTdDNUMsU0FBUSxTQUFTMEQsR0FDL0JBLEVBQWlCWixpQkFBaUIsU0FBUyxXQUNuQ2xCLFNBQVNDLGNBQWMsNEJBQTRCYSxZQUFjZ0IsRUFBaUJYLHVCQUF1QkwsV0FDekdILEVBQWEsUUFFakJ4QixFQUFRVCxjQUFjb0QsRUFBaUJYLHVCQUF1QkwsV0FDOURjLElBQ0FGLEdBQ0osR0FDSixJQXVCd0JyRSxNQUFNMEQsS0FBS2YsU0FBU2dCLGlCQUFpQixnQ0FDN0M1QyxTQUFRLFNBQVMyRCxHQUM3QkEsRUFBZWIsaUJBQWlCLFNBQVMsV0FDckNQLEVBQWFvQixFQUFlakIsVUFDaEMsR0FDSixJQUVBZixFQUFlbUIsaUJBQWlCLFNBQVMsV0FDckNQLEVBQWEsT0FDakIsSUFiQWUsR0FDSixDQWVBZixFQUFhLFFBeElUVCxFQUFlZ0IsaUJBQWlCLFNBMUJwQyxXQUNJZCxFQUFtQjRCLFVBQVVDLE9BQU8sV0FDeEMsSUF5Qkk1QixFQUFnQmEsaUJBQWlCLFVBQVVnQixHQXZCL0MsU0FBa0NBLEdBQzFCL0MsRUFBUXZCLG1CQUFtQmEsUUFBUTBELE1BQU90RixNQUFNc0YsT0FDaERDLE1BQU0sa0RBRU5qRCxFQUFRN0IsWUFBWW1CLFFBQVEwRCxNQUFPLElBQUl4RixFQUFLRSxNQUFNc0YsTUFBT3JGLFlBQVlxRixNQUFPcEYsUUFBUW9GLE1BQU9uRixTQUFTbUYsUUFDcEcvQixFQUFtQjRCLFVBQVVLLElBQUksWUFDakMxQixFQUFhbEMsUUFBUTBELE9BRXJCdEYsTUFBTXNGLE1BQVEsR0FDZHJGLFlBQVlxRixNQUFRLEdBQ3BCcEYsUUFBUW9GLE1BQVEsSUFJcEJELEVBQUVJLGdCQUNOLENBUW9EQyxDQUF5QkwsS0FDekU3QixFQUFnQmEsaUJBQWlCLFNBUHJDLFdBQ0lkLEVBQW1CNEIsVUFBVUssSUFBSSxXQUNyQyxJQTZJQVQsSUFoRUl6QixFQUFjZSxpQkFBaUIsU0FBUyxLQXJCeENaLEVBQXNCMEIsVUFBVUMsT0FBTyxXQXFCNkIsSUFDcEUxQixFQUFlVyxpQkFBaUIsVUFBV2dCLEdBZi9DLFNBQWlDQSxHQUN6Qi9DLEVBQVFKLGtCQUFrQlAsWUFBWTJELE9BQ3RDQyxNQUFNLDBEQUVOakQsRUFBUVosV0FBV0MsWUFBWTJELE9BQy9CN0IsRUFBc0IwQixVQUFVSyxJQUFJLFlBQ3BDVCxJQUVBcEQsWUFBWTJELE1BQVEsSUFFeEJELEVBQUVJLGdCQUNOLENBSXFERSxDQUF3Qk4sS0FDekUzQixFQUFlVyxpQkFBaUIsU0FBUyxLQW5CekNaLEVBQXNCMEIsVUFBVUssSUFBSSxXQW1Cb0MsRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG9saXN0Ly4vc3JjL1RvZG8uanMiLCJ3ZWJwYWNrOi8vdG9kb2xpc3QvLi9zcmMvUHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9Ub2RvTGlzdC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvbGlzdC8uL3NyYy9TdG9yYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBUb2Rve1xuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHkpe1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgUHJvamVjdHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLml0ZW1zID0gbmV3IEFycmF5KCk7XG4gICAgfVxuXG4gICAgYWRkVG9kb0l0ZW0odG9kb0l0ZW0pe1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2godG9kb0l0ZW0pO1xuICAgIH1cblxuICAgIHJlbW92ZVRvZG9JdGVtKGl0ZW1OYW1lKXtcbiAgICAgICAgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXMuZmlsdGVyKCh0b2RvSXRlbSkgPT4gdG9kb0l0ZW0udGl0bGUgIT09IGl0ZW1OYW1lKTtcbiAgICB9XG5cbiAgICB0b2RvSXRlbU5hbWVFeGlzdHModG9kb0l0ZW1OYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VG9kb0l0ZW1OYW1lcygpLmluY2x1ZGVzKHRvZG9JdGVtTmFtZSk7XG4gICAgfVxuXG4gICAgZ2V0VG9kb0l0ZW1OYW1lcygpe1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcy5tYXAodG9kb0l0ZW0gPT4gdG9kb0l0ZW0udGl0bGUpXG4gICAgfVxuXG4gICAgZ2V0VG9kb0l0ZW1zKCl7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zO1xuICAgIH1cblxuICAgIHNldFRvZG9JdGVtcyhpdGVtcyl7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcbiAgICB9XG5cbiAgICB0b2dnbGVUb2RvSXRlbUNvbXBsZXRlZFN0YXR1cyh0aXRsZSl7XG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbih0b2RvSXRlbSl7XG4gICAgICAgICAgICBpZiAodG9kb0l0ZW0udGl0bGUgPT09IHRpdGxlKXtcbiAgICAgICAgICAgICAgICBpZiAodG9kb0l0ZW0uY29tcGxldGVkID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9JdGVtLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9kb0l0ZW0uY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICB9XG59IiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gJy4vUHJvamVjdCc7XG5cbmV4cG9ydCBjbGFzcyBUb2RvTGlzdHtcbiAgICBjb25zdHJ1Y3Rvcigpe1xuICAgICAgICB0aGlzLnByb2plY3RzID0ge307XG4gICAgICAgIHRoaXMucHJvamVjdHNbXCJIb21lXCJdID0gbmV3IFByb2plY3QoKTtcbiAgICB9XG5cbiAgICBhZGRQcm9qZWN0KHByb2plY3ROYW1lLCBwcm9qZWN0KXtcbiAgICAgICAgdGhpcy5wcm9qZWN0c1twcm9qZWN0TmFtZV0gPSBwcm9qZWN0O1xuICAgIH1cblxuICAgIHJlbW92ZVByb2plY3QocHJvamVjdE5hbWUpe1xuICAgICAgICBkZWxldGUgdGhpcy5wcm9qZWN0c1twcm9qZWN0TmFtZV07XG4gICAgfVxuXG4gICAgZ2V0UHJvamVjdChwcm9qZWN0TmFtZSl7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3RzW3Byb2plY3ROYW1lXTtcbiAgICB9XG5cbiAgICBnZXRQcm9qZWN0cygpe1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0cztcbiAgICB9XG5cbiAgICBzZXRQcm9qZWN0KHByb2plY3ROYW1lLCBwcm9qZWN0T2JqKXtcbiAgICAgICAgdGhpcy5wcm9qZWN0c1twcm9qZWN0TmFtZV0gPSBwcm9qZWN0T2JqO1xuICAgIH1cblxuICAgIHByb2plY3ROYW1lRXhpc3RzKHByb2plY3ROYW1lKXtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMucHJvamVjdHMpLmluY2x1ZGVzKHByb2plY3ROYW1lKTtcbiAgICB9XG5cbiAgICBnZXRQcm9qZWN0TmFtZXMoKXtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMucHJvamVjdHMpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBUb2RvIH0gZnJvbSAnLi9Ub2RvJztcbmltcG9ydCB7IFN0b3JhZ2UgfSBmcm9tICcuL1N0b3JhZ2UnO1xuXG5jb25zdCBzdG9yYWdlID0gbmV3IFN0b3JhZ2UoKTtcblxuLy8gRE9NIFN0dWZmXG5jb25zdCBob21lUHJvamVjdFRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudSAuaG9tZVwiKTtcbmNvbnN0IGFkZFRvZG9JdGVtQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGRUYXNrQnRuXCIpO1xuY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkUHJvamVjdEJ0blwiKTtcbmNvbnN0IGFkZFRvZG9Gb3JtT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkVGFza0Zvcm1PdmVybGF5XCIpO1xuY29uc3QgbmV3VG9kb1Rhc2tGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXdUYXNrXCIpO1xuY29uc3QgYWRkUHJvamVjdEZvcm1PdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGRQcm9qZWN0T3ZlcmxheVwiKVxuY29uc3QgbmV3UHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ld1Byb2plY3RcIik7XG5jb25zdCB0b2RvRGlzcGxheUFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG9EaXNwbGF5XCIpO1xuY29uc3QgcHJvamVjdHNEaXNwbGF5QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdERpc3BsYXlBcmVhXCIpO1xuY29uc3QgZGFzaGJvYXJkUHJvamVjdFRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXNoYm9hcmQgLnByb2plY3RUaXRsZVwiKTtcblxuZnVuY3Rpb24gYWRkVG9kb0J0bkhhbmRsZXIoKXtcbiAgICBhZGRUb2RvRm9ybU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImluYWN0aXZlXCIpO1xufVxuXG5mdW5jdGlvbiBzdWJtaXROZXdUb2RvRm9ybUhhbmRsZXIoZSl7XG4gICAgaWYgKHN0b3JhZ2UudG9kb0l0ZW1OYW1lRXhpc3RzKHByb2plY3QudmFsdWUsIHRpdGxlLnZhbHVlKSl7XG4gICAgICAgIGFsZXJ0KFwiVGFzayBOYW1lIGFscmVhZHkgZXhpc3RzLCBjaG9vc2UgYW5vdGhlciBuYW1lXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3JhZ2UuYWRkVG9kb0l0ZW0ocHJvamVjdC52YWx1ZSwgbmV3IFRvZG8odGl0bGUudmFsdWUsIGRlc2NyaXB0aW9uLnZhbHVlLCBkdWVEYXRlLnZhbHVlLCBwcmlvcml0eS52YWx1ZSkpO1xuICAgICAgICBhZGRUb2RvRm9ybU92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImluYWN0aXZlXCIpO1xuICAgICAgICBkaXNwbGF5VG9kb3MocHJvamVjdC52YWx1ZSk7XG5cbiAgICAgICAgdGl0bGUudmFsdWUgPSBcIlwiO1xuICAgICAgICBkZXNjcmlwdGlvbi52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGR1ZURhdGUudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gYWRkVG9kb0Zvcm1DbG9zZUJ0bkhhbmRsZXIoKXtcbiAgICBhZGRUb2RvRm9ybU92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImluYWN0aXZlXCIpO1xufVxuXG5mdW5jdGlvbiBhZGROZXdUb2RvKCl7XG4gICAgYWRkVG9kb0l0ZW1CdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGFkZFRvZG9CdG5IYW5kbGVyKTtcbiAgICBuZXdUb2RvVGFza0Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBlID0+IHN1Ym1pdE5ld1RvZG9Gb3JtSGFuZGxlcihlKSk7XG4gICAgbmV3VG9kb1Rhc2tGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNldFwiLCBhZGRUb2RvRm9ybUNsb3NlQnRuSGFuZGxlcik7XG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVRvZG8oKXtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGRhc2hib2FyZFByb2plY3RUaXRsZS5pbm5lclRleHQ7XG4gICAgY29uc3QgdG9kb1JlbW92ZUJ0bnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmVtb3ZlSXRlbUJ0blwiKSk7XG4gICAgdG9kb1JlbW92ZUJ0bnMuZm9yRWFjaChmdW5jdGlvbih0b2RvUmVtb3ZlQnRuKXtcbiAgICAgICAgdG9kb1JlbW92ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1OYW1lID0gdG9kb1JlbW92ZUJ0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmlubmVyVGV4dDtcbiAgICAgICAgICAgIHN0b3JhZ2UucmVtb3ZlVG9kb0l0ZW0ocHJvamVjdE5hbWUsIGl0ZW1OYW1lKTtcbiAgICAgICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0TmFtZSk7XG4gICAgICAgIH0pXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gdXBkYXRlVG9kb0NvbXBsZXRlZFN0YXR1cygpe1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZGFzaGJvYXJkUHJvamVjdFRpdGxlLmlubmVyVGV4dDtcbiAgICBjb25zdCBjaGVja2JveGVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmN1c3RvbUNoZWNrYm94XCIpKTtcbiAgICBjaGVja2JveGVzLmZvckVhY2goZnVuY3Rpb24oY2hlY2tib3gpe1xuICAgICAgICBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9JdGVtVGl0bGUgPSBjaGVja2JveC5uZXh0RWxlbWVudFNpYmxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJUZXh0O1xuICAgICAgICAgICAgc3RvcmFnZS50b2dnbGVUb2RvSXRlbUNvbXBsZXRlZFN0YXR1cyhwcm9qZWN0TmFtZSwgdG9kb0l0ZW1UaXRsZSk7XG4gICAgICAgICAgICBkaXNwbGF5VG9kb3MocHJvamVjdE5hbWUpO1xuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlUb2Rvcyhwcm9qZWN0TmFtZSl7XG4gICAgdG9kb0Rpc3BsYXlBcmVhLnRleHRDb250ZW50ID0gXCJcIjtcblxuICAgIGRhc2hib2FyZFByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIHN0b3JhZ2UuZ2V0VG9kb0l0ZW1zKHByb2plY3ROYW1lKS5mb3JFYWNoKGZ1bmN0aW9uKHRvZG9JdGVtKXtcbiAgICAgICAgdG9kb0Rpc3BsYXlBcmVhLmlubmVySFRNTCArPSBgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0b2RvSXRlbVRhYlwiIHByaW9yaXR5PVwiJHt0b2RvSXRlbS5wcmlvcml0eX1cIiBjb21wbGV0ZWQ9XCIke3RvZG9JdGVtLmNvbXBsZXRlZH1cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjdXN0b21DaGVja2JveFwiIGNoZWNrZWQ9JHt0b2RvSXRlbS5jb21wbGV0ZWR9PjwvZGl2PlxuICAgICAgICAgICAgPGRldGFpbHM+XG4gICAgICAgICAgICAgICAgPHN1bW1hcnkgY2xhc3M9XCJ0b2RvSXRlbVN1bW1hcnlcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRvZG9JdGVtVGl0bGVcIj4ke3RvZG9JdGVtLnRpdGxlfTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kb0l0ZW1EdWVEYXRlXCI+JHt0b2RvSXRlbS5kdWVEYXRlfTwvZGl2PlxuICAgICAgICAgICAgICAgIDwvc3VtbWFyeT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidG9kb0l0ZW1EZXNjcmlwdGlvblwiPkRlc2NyaXB0aW9uOiAke3RvZG9JdGVtLmRlc2NyaXB0aW9ufTwvZGl2PlxuICAgICAgICAgICAgPC9kZXRhaWxzPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlbW92ZUl0ZW1CdG5cIj4mIzEwNzk5OzwvZGl2PlxuICAgICAgICA8L2Rpdj5gO1xuICAgIH0pO1xuICAgIGRlbGV0ZVRvZG8oKTtcbiAgICB1cGRhdGVUb2RvQ29tcGxldGVkU3RhdHVzKCk7XG59XG5cbi8vIFByb2plY3RzIERPTVxuZnVuY3Rpb24gYWRkUHJvamVjdEJ0bkhhbmRsZXIoKXtcbiAgICBhZGRQcm9qZWN0Rm9ybU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImluYWN0aXZlXCIpO1xufVxuXG5mdW5jdGlvbiBjYW5jZWxQcm9qZWN0QnRuSGFuZGxlcigpe1xuICAgIGFkZFByb2plY3RGb3JtT3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiaW5hY3RpdmVcIik7XG59XG5cbmZ1bmN0aW9uIHN1Ym1pdFByb2plY3RCdG5IYW5kbGVyKGUpe1xuICAgIGlmIChzdG9yYWdlLnByb2plY3ROYW1lRXhpc3RzKHByb2plY3ROYW1lLnZhbHVlKSl7XG4gICAgICAgIGFsZXJ0KFwiUHJvamVjdCBOYW1lIGFscmVhZHkgZXhpc3RzLCBjaG9vc2UgYSBkaWZmZXJlbnQgbmFtZS5cIilcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdG9yYWdlLmFkZFByb2plY3QocHJvamVjdE5hbWUudmFsdWUpO1xuICAgICAgICBhZGRQcm9qZWN0Rm9ybU92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImluYWN0aXZlXCIpO1xuICAgICAgICBkaXNwbGF5UHJvamVjdE5hbWVzKCk7XG5cbiAgICAgICAgcHJvamVjdE5hbWUudmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG59XG5cbmZ1bmN0aW9uIGFkZE5ld1Byb2plY3QoKXtcbiAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBhZGRQcm9qZWN0QnRuSGFuZGxlcigpKTtcbiAgICBuZXdQcm9qZWN0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBzdWJtaXRQcm9qZWN0QnRuSGFuZGxlcihlKSk7XG4gICAgbmV3UHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IGNhbmNlbFByb2plY3RCdG5IYW5kbGVyKCkpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVQcm9qZWN0TmFtZWluRm9ybVNlbGVjdCgpe1xuICAgIGNvbnN0IHByb2plY3ROYW1lU2VsZWN0aW9uID0gbmV3VG9kb1Rhc2tGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvamVjdFwiKTtcbiAgICBwcm9qZWN0TmFtZVNlbGVjdGlvbi50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgc3RvcmFnZS5nZXRQcm9qZWN0TmFtZXMoKS5mb3JFYWNoKGZ1bmN0aW9uKHByb2plY3ROYW1lKXtcbiAgICAgICAgcHJvamVjdE5hbWVTZWxlY3Rpb24uaW5uZXJIVE1MICs9IGBcbiAgICAgICAgPG9wdGlvbiB2YWx1ZT0ke3Byb2plY3ROYW1lfT4ke3Byb2plY3ROYW1lfTwvb3B0aW9uPlxuICAgICAgICBgXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZGVsZXRlUHJvamVjdCgpe1xuICAgIGNvbnN0IHJlbW92ZVByb2plY3RCdG5zID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByb2plY3RUYWIgLmNsb3NlQnV0dG9uXCIpKTtcblxuICAgIHJlbW92ZVByb2plY3RCdG5zLmZvckVhY2goZnVuY3Rpb24ocmVtb3ZlUHJvamVjdEJ0bil7XG4gICAgICAgIHJlbW92ZVByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXNoYm9hcmQgLnByb2plY3RUaXRsZVwiKS5pbm5lclRleHQgPT09IHJlbW92ZVByb2plY3RCdG4ucHJldmlvdXNFbGVtZW50U2libGluZy5pbm5lclRleHQpe1xuICAgICAgICAgICAgICAgIGRpc3BsYXlUb2RvcyhcIkhvbWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdG9yYWdlLnJlbW92ZVByb2plY3QocmVtb3ZlUHJvamVjdEJ0bi5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmlubmVyVGV4dCk7XG4gICAgICAgICAgICBkaXNwbGF5UHJvamVjdE5hbWVzKCk7XG4gICAgICAgICAgICB1cGRhdGVQcm9qZWN0TmFtZWluRm9ybVNlbGVjdCgpO1xuICAgICAgICB9KVxuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGRpc3BsYXlQcm9qZWN0TmFtZXMoKXtcbiAgICBwcm9qZWN0c0Rpc3BsYXlBcmVhLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBjb25zdCBwcm9qZWN0TmFtZXMgPSBzdG9yYWdlLmdldFByb2plY3ROYW1lcygpLnNsaWNlKDEpO1xuICAgIFxuICAgIHByb2plY3ROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKHByb2plY3ROYW1lKXtcbiAgICAgICAgcHJvamVjdHNEaXNwbGF5QXJlYS5pbm5lckhUTUwgKz0gYFxuICAgICAgICA8ZGl2IGNsYXNzPVwicHJvamVjdFRhYlwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2plY3RUYWJOYW1lXCI+XG4gICAgICAgICAgICAgICAgJHtwcm9qZWN0TmFtZX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNsb3NlQnV0dG9uXCI+JiMxMDc5OTs8L2Rpdj5cbiAgICAgICAgPC9kaXY+YDtcbiAgICB9KTtcblxuICAgIGRlbGV0ZVByb2plY3QoKTtcbiAgICBkaXNwbGF5UHJvamVjdFRvZG9zKCk7XG4gICAgdXBkYXRlUHJvamVjdE5hbWVpbkZvcm1TZWxlY3QoKTtcbn1cblxuZnVuY3Rpb24gZGlzcGxheVByb2plY3RUb2Rvcygpe1xuICAgIGNvbnN0IHByb2plY3RUYWJOYW1lcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9qZWN0VGFiIC5wcm9qZWN0VGFiTmFtZVwiKSk7XG4gICAgcHJvamVjdFRhYk5hbWVzLmZvckVhY2goZnVuY3Rpb24ocHJvamVjdFRhYk5hbWUpe1xuICAgICAgICBwcm9qZWN0VGFiTmFtZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGRpc3BsYXlUb2Rvcyhwcm9qZWN0VGFiTmFtZS5pbm5lclRleHQpO1xuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBob21lUHJvamVjdFRhYi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgZGlzcGxheVRvZG9zKFwiSG9tZVwiKTtcbiAgICB9KVxufVxuXG5kaXNwbGF5VG9kb3MoXCJIb21lXCIpO1xuYWRkTmV3VG9kbygpO1xuZGlzcGxheVByb2plY3ROYW1lcygpO1xuYWRkTmV3UHJvamVjdCgpOyIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuL1Byb2plY3QnO1xuaW1wb3J0IHsgVG9kb0xpc3QgfSBmcm9tICcuL1RvZG9MaXN0JztcblxuXG5leHBvcnQgY2xhc3MgU3RvcmFnZXtcbiAgICBzZXRUb2RvTGlzdChkYXRhKXtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2RvTGlzdFwiLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XG4gICAgfVxuXG4gICAgYWRkUHJvamVjdChwcm9qZWN0TmFtZSl7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gdGhpcy5nZXRUb2RvTGlzdCgpO1xuICAgICAgICB0b2RvTGlzdC5hZGRQcm9qZWN0KHByb2plY3ROYW1lLCBuZXcgUHJvamVjdCgpKTtcbiAgICAgICAgdGhpcy5zZXRUb2RvTGlzdCh0b2RvTGlzdCk7XG4gICAgfVxuXG4gICAgcHJvamVjdE5hbWVFeGlzdHMocHJvamVjdE5hbWUpe1xuICAgICAgICBjb25zdCB0b2RvTGlzdCA9IHRoaXMuZ2V0VG9kb0xpc3QoKTtcbiAgICAgICAgcmV0dXJuIHRvZG9MaXN0LnByb2plY3ROYW1lRXhpc3RzKHByb2plY3ROYW1lKTtcbiAgICB9XG5cbiAgICByZW1vdmVQcm9qZWN0KHByb2plY3ROYW1lKXtcbiAgICAgICAgY29uc3QgdG9kb0xpc3QgPSB0aGlzLmdldFRvZG9MaXN0KCk7XG4gICAgICAgIHRvZG9MaXN0LnJlbW92ZVByb2plY3QocHJvamVjdE5hbWUpO1xuICAgICAgICB0aGlzLnNldFRvZG9MaXN0KHRvZG9MaXN0KTtcbiAgICB9XG5cbiAgICBnZXRQcm9qZWN0TmFtZXMoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VG9kb0xpc3QoKS5nZXRQcm9qZWN0TmFtZXMoKVxuICAgIH1cblxuICAgIGdldFRvZG9MaXN0KCl7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gT2JqZWN0LmFzc2lnbihuZXcgVG9kb0xpc3QoKSwgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9MaXN0XCIpKSk7XG4gICAgICAgIFxuICAgICAgICBmb3IobGV0IHByb2plY3QgaW4gdG9kb0xpc3QuZ2V0UHJvamVjdHMoKSl7XG4gICAgICAgICAgICB0b2RvTGlzdC5zZXRQcm9qZWN0KHByb2plY3QsIE9iamVjdC5hc3NpZ24obmV3IFByb2plY3QoKSwgdG9kb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0KSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRvZG9MaXN0O1xuICAgIH1cblxuICAgIGFkZFRvZG9JdGVtKHByb2plY3ROYW1lLCB0b2RvSXRlbSl7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0ID0gdGhpcy5nZXRUb2RvTGlzdCgpO1xuICAgICAgICB0b2RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS5hZGRUb2RvSXRlbSh0b2RvSXRlbSk7XG4gICAgICAgIHRoaXMuc2V0VG9kb0xpc3QodG9kb0xpc3QpO1xuICAgIH1cblxuICAgIHJlbW92ZVRvZG9JdGVtKHByb2plY3ROYW1lLCB0b2RvSXRlbU5hbWUpe1xuICAgICAgICBjb25zdCB0b2RvTGlzdCA9IHRoaXMuZ2V0VG9kb0xpc3QoKTtcbiAgICAgICAgdG9kb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkucmVtb3ZlVG9kb0l0ZW0odG9kb0l0ZW1OYW1lKTtcbiAgICAgICAgdGhpcy5zZXRUb2RvTGlzdCh0b2RvTGlzdCk7XG4gICAgfVxuXG4gICAgZ2V0VG9kb0l0ZW1zKHByb2plY3ROYW1lKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VG9kb0xpc3QoKS5nZXRQcm9qZWN0KHByb2plY3ROYW1lKS5nZXRUb2RvSXRlbXMoKTtcbiAgICB9XG5cbiAgICB0b2RvSXRlbU5hbWVFeGlzdHMocHJvamVjdE5hbWUsIHRvZG9JdGVtTmFtZSl7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRvZG9MaXN0KCkuZ2V0UHJvamVjdChwcm9qZWN0TmFtZSkudG9kb0l0ZW1OYW1lRXhpc3RzKHRvZG9JdGVtTmFtZSk7XG4gICAgfVxuXG4gICAgdG9nZ2xlVG9kb0l0ZW1Db21wbGV0ZWRTdGF0dXMocHJvamVjdE5hbWUsIHRvZG9JdGVtKXtcbiAgICAgICAgY29uc3QgdG9kb0xpc3QgPSB0aGlzLmdldFRvZG9MaXN0KCk7XG4gICAgICAgIHRvZG9MaXN0LmdldFByb2plY3QocHJvamVjdE5hbWUpLnRvZ2dsZVRvZG9JdGVtQ29tcGxldGVkU3RhdHVzKHRvZG9JdGVtKTtcbiAgICAgICAgdGhpcy5zZXRUb2RvTGlzdCh0b2RvTGlzdCk7XG4gICAgfVxuICAgIFxufVxuIl0sIm5hbWVzIjpbIlRvZG8iLCJjb25zdHJ1Y3RvciIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJ0aGlzIiwiY29tcGxldGVkIiwiUHJvamVjdCIsIml0ZW1zIiwiQXJyYXkiLCJhZGRUb2RvSXRlbSIsInRvZG9JdGVtIiwicHVzaCIsInJlbW92ZVRvZG9JdGVtIiwiaXRlbU5hbWUiLCJmaWx0ZXIiLCJ0b2RvSXRlbU5hbWVFeGlzdHMiLCJ0b2RvSXRlbU5hbWUiLCJnZXRUb2RvSXRlbU5hbWVzIiwiaW5jbHVkZXMiLCJtYXAiLCJnZXRUb2RvSXRlbXMiLCJzZXRUb2RvSXRlbXMiLCJ0b2dnbGVUb2RvSXRlbUNvbXBsZXRlZFN0YXR1cyIsImZvckVhY2giLCJUb2RvTGlzdCIsInByb2plY3RzIiwiYWRkUHJvamVjdCIsInByb2plY3ROYW1lIiwicHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJnZXRQcm9qZWN0IiwiZ2V0UHJvamVjdHMiLCJzZXRQcm9qZWN0IiwicHJvamVjdE9iaiIsInByb2plY3ROYW1lRXhpc3RzIiwiT2JqZWN0Iiwia2V5cyIsImdldFByb2plY3ROYW1lcyIsInN0b3JhZ2UiLCJzZXRUb2RvTGlzdCIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInRvZG9MaXN0IiwiZ2V0VG9kb0xpc3QiLCJhc3NpZ24iLCJwYXJzZSIsImdldEl0ZW0iLCJob21lUHJvamVjdFRhYiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZFRvZG9JdGVtQnRuIiwiYWRkUHJvamVjdEJ0biIsImFkZFRvZG9Gb3JtT3ZlcmxheSIsIm5ld1RvZG9UYXNrRm9ybSIsImFkZFByb2plY3RGb3JtT3ZlcmxheSIsIm5ld1Byb2plY3RGb3JtIiwidG9kb0Rpc3BsYXlBcmVhIiwicHJvamVjdHNEaXNwbGF5QXJlYSIsImRhc2hib2FyZFByb2plY3RUaXRsZSIsImRpc3BsYXlUb2RvcyIsInRleHRDb250ZW50IiwiaW5uZXJIVE1MIiwiaW5uZXJUZXh0IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b2RvUmVtb3ZlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjaGlsZHJlbiIsImRlbGV0ZVRvZG8iLCJjaGVja2JveCIsInRvZG9JdGVtVGl0bGUiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ1cGRhdGVUb2RvQ29tcGxldGVkU3RhdHVzIiwidXBkYXRlUHJvamVjdE5hbWVpbkZvcm1TZWxlY3QiLCJwcm9qZWN0TmFtZVNlbGVjdGlvbiIsImRpc3BsYXlQcm9qZWN0TmFtZXMiLCJzbGljZSIsInJlbW92ZVByb2plY3RCdG4iLCJwcm9qZWN0VGFiTmFtZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImUiLCJ2YWx1ZSIsImFsZXJ0IiwiYWRkIiwicHJldmVudERlZmF1bHQiLCJzdWJtaXROZXdUb2RvRm9ybUhhbmRsZXIiLCJzdWJtaXRQcm9qZWN0QnRuSGFuZGxlciJdLCJzb3VyY2VSb290IjoiIn0=